<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <meta name="theme-color" content="#0b1220"/>
  <title>Fighting Llamas â€” Snake XL</title>
  <style>
    :root{
      --bg:#0b0f1a; --bg2:#0e1424; --field:#0f6d43; --field2:#09412b;
      --chalk:#e8edf2; --gold:#ffd166; --accent:#8ecae6; --danger:#ef476f; --poop:#5a3a22;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:radial-gradient(1200px 600px at 50% -10%, #18213a 0%, var(--bg) 50%, #080b14 100%);
      color:var(--chalk); font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      display:flex; flex-direction:column; align-items:center;
    }
    header{width:100%; text-align:center; padding:16px 12px 6px}
    .title{font-weight:900; letter-spacing:.3px; font-size:clamp(18px,4.6vw,34px)}
    .badge{display:inline-block; margin-top:6px; border:1px solid var(--gold); color:var(--gold);
           border-radius:999px; padding:6px 12px; font-weight:800; background:linear-gradient(180deg,rgba(255,209,102,.08),transparent)}
    .wrap{width:100%; max-width:860px; padding:8px 12px 18px}
    #hud{display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap}
    .left,.right{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
    .pill{display:inline-flex; align-items:center; gap:6px; border:1px solid #283247; background:linear-gradient(180deg,#0f1425,#0b1120);
          padding:8px 12px; border-radius:12px; font-weight:700; box-shadow:inset 0 0 12px rgba(255,255,255,.02)}
    .pill b{color:var(--gold)}
    button{appearance:none; border:1px solid #283247; background:linear-gradient(180deg,#121a31,#0d1428); color:var(--chalk);
           border-radius:12px; padding:9px 14px; font-weight:800}
    button:active{transform:scale(.98)}
    .primary{border-color:#345; box-shadow:0 0 0 2px rgba(142,202,230,.08) inset}
    select, input[type=checkbox]{background:#0e152a; color:var(--chalk); border:1px solid #283247; border-radius:8px; padding:6px 8px}
    label{display:inline-flex; align-items:center; gap:6px}

    .stadium{position:relative; width:100%; aspect-ratio:1/1; border:2px solid #26314a; border-radius:18px; overflow:hidden;
             background:linear-gradient(180deg,var(--field) 0%, var(--field2) 100%); box-shadow:0 10px 30px rgba(0,0,0,.4), inset 0 0 0 4px rgba(0,0,0,.25)}
    canvas{display:block; width:100%; height:100%}
    .glass{position:absolute; inset:0; background:radial-gradient(1000px 160px at 50% -80px, rgba(255,255,255,.08), rgba(255,255,255,0)); pointer-events:none}

    /* Full-screen overlay (fixed) so it scrolls on iOS regardless of container overflow */
    .overlay{position:fixed; z-index:1000; inset:0; display:none; align-items:flex-start; justify-content:center;
             background:rgba(10,12,18,.55); backdrop-filter:blur(4px);
             padding: max(8px, env(safe-area-inset-top)) 10px max(12px, env(safe-area-inset-bottom)) 10px;
             overflow:auto; -webkit-overflow-scrolling:touch;}
    .overlay.show{display:flex}
    .card{background:linear-gradient(180deg,#0f1324,#0a0f1e); border:1px solid #2a3550; border-radius:16px; padding:18px;
          width:min(92%,760px); box-shadow:0 10px 40px rgba(0,0,0,.6)}
    .card h2{margin:0 0 6px; font-size:22px}
    .small{opacity:.85; font-size:13px; margin-bottom:8px}
    .grid-wrap{max-height:70dvh; overflow:auto; padding-right:6px; border:1px solid #222a42; border-radius:12px; background:#0b1120}
    .grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(150px,1fr)); gap:10px; padding:10px}
    .chip{border:1px solid #2a3550; border-radius:12px; padding:12px 10px; text-align:center; cursor:pointer;
          background:linear-gradient(180deg,#0f162b,#0c1427)}
    .chip:hover{outline:2px solid rgba(255,209,102,.25)}
    .chip .tag{display:block; font-size:12px; opacity:.7}
    .flex{display:flex; gap:8px; align-items:center; justify-content:center; margin-top:10px}

    .toast{position:absolute; top:10px; left:50%; transform:translateX(-50%); background:rgba(0,0,0,.6); border:1px solid #2a3550; border-radius:12px; padding:6px 10px; font-weight:700}
    .cooldown{width:110px; height:10px; background:#1a2336; border:1px solid #2a3550; border-radius:999px; overflow:hidden}
    .cooldown > span{display:block; height:100%; width:0%; background:linear-gradient(90deg,var(--danger),#f59e0b)}
  </style>
</head>
<body>
  <header>
    <div class="title">Fighting Llamas â€” Snake XL</div>
    <div class="badge">2025 Fantasy Football â€¢ Commissioner: Taylor Garfield</div>
  </header>

  <div class="wrap">
    <div id="hud">
      <div class="left">
        <div class="pill">Score: <b id="score">0</b></div>
        <div class="pill">High: <b id="high">0</b></div>
        <label class="pill">Speed
          <select id="speedSel" aria-label="Speed">
            <option value="110">1x</option>
            <option value="90">1.25x</option>
            <option value="75">1.5x</option>
            <option value="60">2x</option>
          </select>
        </label>
        <label class="pill"><input type="checkbox" id="soundToggle" checked/> Sound</label>
      </div>
      <div class="right">
        <button id="playBtn" class="primary" title="Play / Resume">Play</button>
        <button id="pauseBtn" title="Pause">Pause</button>
        <button id="resetBtn" title="Reset">Reset</button>
        <button id="abBtn" title="Antonio Brown Power" style="border-color:#553; background:linear-gradient(180deg,#261b12,#1b130d);">Antonio Brown ðŸ’©</button>
        <div class="cooldown" title="Power cooldown"><span id="cdBar"></span></div>
      </div>
    </div>

    <div class="stadium">
      <canvas id="field" width="860" height="860"></canvas>
      <div class="glass"></div>
      <div id="toast" class="toast" style="display:none"></div>
    </div>
  </div>

  <!-- Full-screen overlay lives AFTER stadium so it isn't clipped -->
  <div id="overlay" class="overlay show" data-mode="menu">
    <div class="card">
      <h2 id="ov-title">Choose Your Player</h2>
      <div id="ov-sub" class="small">Scroll to see all names. Tap a name for a ridiculous intro sound. Tap <b>Start</b> to begin.</div>
      <div class="grid-wrap" id="menu-block">
        <div class="grid" id="roster"></div>
      </div>
      <div class="flex" id="menu-actions">
        <button id="startBtn" class="primary">Start</button>
        <button id="randomBtn">Random</button>
      </div>
      <div class="flex" id="message-actions" style="display:none">
        <button id="resumeBtn" class="primary">Play</button>
      </div>
    </div>
  </div>

  <script>
  const ROSTER = [
    "Nathan Bickel","Liam Keller","Jake Miltenberger","Zak Daboll","Brian Munn","Akash Malhan",
    "Jimmy Garrison","Scott Remily","Tyrone Sanderlin","Chris Tramble","Guy Mazzell","Keith Page",
    "Taylor James Garfield","Zachary Garrison"
  ];
  class SFX{constructor(){this.enabled=true;this.ctx=null;this.master=null;}init(){if(this.ctx)return;const AC=window.AudioContext||window.webkitAudioContext;this.ctx=new AC();this.master=this.ctx.createGain();this.master.gain.value=0.18;this.master.connect(this.ctx.destination);const o=this.ctx.createOscillator(),g=this.ctx.createGain();g.gain.value=0;o.connect(g);g.connect(this.master);o.start();o.stop(this.ctx.currentTime+0.01);}async resume(){if(this.ctx&&this.ctx.state==='suspended')await this.ctx.resume();}tone({f=440,dur=.08,type='square',start=0,v=.9,slide=0}){if(!this.enabled||!this.ctx)return;const t=this.ctx.currentTime+start,o=this.ctx.createOscillator(),g=this.ctx.createGain();o.type=type;o.frequency.setValueAtTime(f,t);if(slide)o.frequency.exponentialRampToValueAtTime(Math.max(40,f+slide),t+dur);g.gain.setValueAtTime(0,t);g.gain.linearRampToValueAtTime(v*0.9,t+0.01);g.gain.exponentialRampToValueAtTime(0.0001,t+dur);o.connect(g);g.connect(this.master);o.start(t);o.stop(t+dur+0.02);}burst({dur=.12,v=.6,start=0}){if(!this.enabled||!this.ctx)return;const t=this.ctx.currentTime+start,bu=this.ctx.createBuffer(1,this.ctx.sampleRate*dur,this.ctx.sampleRate);const d=bu.getChannelData(0);for(let i=0;i<d.length;i++)d[i]=(Math.random()*2-1)*Math.pow(1-i/d.length,2);const src=this.ctx.createBufferSource();src.buffer=bu;const g=this.ctx.createGain();g.gain.value=v;src.connect(g);g.connect(this.master);src.start(t);}crowd(){this.burst({dur:.20,v:.35});this.tone({f:220,dur:.12,type:'sawtooth'});this.tone({f:330,dur:.14,type:'sawtooth',start:.06});}whistle(){this.tone({f:1500,dur:.10,type:'triangle'});this.tone({f:1800,dur:.12,type:'triangle',start:.08});this.tone({f:2200,dur:.16,type:'triangle',start:.14});}thud(){this.burst({dur:.10,v:.5});this.tone({f:110,dur:.08,type:'sine'});}eat(){this.tone({f:780,dur:.09});this.tone({f:1040,dur:.09,start:.02});this.crowd();}turn(){this.tone({f:420,dur:.05,type:'triangle'});}start(){this.whistle();this.crowd();}over(){this.tone({f:160,dur:.18,type:'sawtooth'});this.tone({f:120,dur:.22,type:'sawtooth',start:.14});}silly(n){const h=Array.from(n).reduce((a,c)=>a+c.charCodeAt(0),0);const base=300+(h%5)*80;this.tone({f:base+40,dur:.1,type:'square'});this.tone({f:base*2.2,dur:.12,type:'square',start:.05});this.burst({dur:.12,v:.45,start:.08});this.tone({f:base*0.6,dur:.18,type:'triangle',start:.12,slide:-120});}poop(){this.burst({dur:.18,v:.7});this.tone({f:90,dur:.22,type:'sine'});this.tone({f:2200,dur:.12,type:'triangle',start:.05,slide:-1200});}}
  const sfx=new SFX();

  const cvs=document.getElementById('field'),ctx=cvs.getContext('2d');
  const overlay=document.getElementById('overlay'),ovTitle=document.getElementById('ov-title'),ovSub=document.getElementById('ov-sub');
  const menuBlock=document.getElementById('menu-block'),menuActions=document.getElementById('menu-actions'),messageActions=document.getElementById('message-actions');
  const startBtn=document.getElementById('startBtn'),randomBtn=document.getElementById('randomBtn'),resumeBtn=document.getElementById('resumeBtn');
  const rosterEl=document.getElementById('roster'); const playBtn=document.getElementById('playBtn'),pauseBtn=document.getElementById('pauseBtn'),resetBtn=document.getElementById('resetBtn'),abBtn=document.getElementById('abBtn');
  const cdBar=document.getElementById('cdBar'),toast=document.getElementById('toast'),scoreEl=document.getElementById('score'),highEl=document.getElementById('high'),spdSel=document.getElementById('speedSel'),soundToggle=document.getElementById('soundToggle');

  let DPR=Math.max(1,Math.min(2,window.devicePixelRatio||1));
  new ResizeObserver(()=>{const r=cvs.getBoundingClientRect();cvs.width=Math.floor(r.width*DPR);cvs.height=Math.floor(r.height*DPR);ctx.setTransform(DPR,0,0,DPR,0,0);}).observe(cvs);

  const COLS=28,ROWS=28;
  const st={snake:[],dir:{x:1,y:0},next:{x:1,y:0},food:{x:0,y:0},score:0,high:Number(localStorage.getItem('ll_high2')||0),
            running:false,timer:null,speed:Number(spdSel.value),particles:[],player:null,power:false,powerUntil:0,cdUntil:0};
  highEl.textContent=st.high;

  function rnd(n){return Math.floor(Math.random()*n)}
  function placeFood(){while(true){const x=rnd(COLS),y=rnd(ROWS);if(!st.snake.some(s=>s.x===x&&s.y===y)){st.food={x,y};return;}}}
  function reset(){const mx=Math.floor(COLS/2),my=Math.floor(ROWS/2); st.snake=[{x:mx,y:my},{x:mx-1,y:my},{x:mx-2,y:my}]; st.dir={x:1,y:0}; st.next={x:1,y:0}; st.score=0; scoreEl.textContent=0; st.power=false; st.particles.length=0; placeFood(); draw(true);}

  function setOverlay(mode,title,sub){overlay.dataset.mode=mode; ovTitle.textContent=title; ovSub.innerHTML=sub||''; const isMenu=mode==='menu'; menuBlock.style.display=isMenu?'block':'none'; menuActions.style.display=isMenu?'flex':'none'; messageActions.style.display=isMenu?'none':'flex';}
  function showOverlay(){overlay.classList.add('show'); document.body.style.overflow='hidden';}
  function hideOverlay(){overlay.classList.remove('show'); document.body.style.overflow='auto';}

  function start(){st.running=true; clearInterval(st.timer); st.timer=setInterval(tick,st.speed); sfx.start(); hideOverlay();}
  function pause(){st.running=false; clearInterval(st.timer); setOverlay('message','Paused','Tap Play to resume.'); showOverlay();}
  function gameOver(){st.running=false; clearInterval(st.timer); sfx.over(); setOverlay('message',`Game Over â€” ${st.player||'Player'}`,`Score ${st.score}. Tap Play to try again.`); showOverlay();}

  function setDir(x,y){if((x===-st.dir.x&&y===0)||(y===-st.dir.y&&x===0))return; st.next={x,y}; sfx.turn();}
  function abPower(){const now=performance.now(); if(now<st.cdUntil)return; sfx.poop(); st.power=true; st.powerUntil=now+5000; st.cdUntil=now+15000; toastMsg('Antonio Brown Power! ðŸ’© 5s');}

  function toastMsg(m){toast.textContent=m; toast.style.display='block'; setTimeout(()=>toast.style.display='none',1600);}

  ROSTER.forEach(n=>{const d=document.createElement('div'); d.className='chip'; d.innerHTML=`<div style="font-weight:800">${n.split(' ')[0]}</div><span class="tag">${n}</span>`; d.addEventListener('click',async()=>{sfx.init(); await sfx.resume(); sfx.silly(n); st.player=n;}); rosterEl.appendChild(d);});
  startBtn.addEventListener('click',async()=>{sfx.init(); await sfx.resume(); if(!st.player){const n=ROSTER[rnd(ROSTER.length)]; sfx.silly(n); st.player=n;} reset(); start();});
  resumeBtn.addEventListener('click',async()=>{sfx.init(); await sfx.resume(); start();});
  randomBtn.addEventListener('click',async()=>{sfx.init(); await sfx.resume(); const n=ROSTER[rnd(ROSTER.length)]; sfx.silly(n); st.player=n;});
  playBtn.addEventListener('click',async()=>{sfx.init(); await sfx.resume(); if(!st.running){ start(); }});
  pauseBtn.addEventListener('click',()=>pause());
  resetBtn.addEventListener('click',()=>{reset(); setOverlay('menu','Choose Your Player','Scroll to select, then Start.'); showOverlay();});
  spdSel.addEventListener('change',()=>{st.speed=Number(spdSel.value); if(st.running){clearInterval(st.timer); st.timer=setInterval(tick,st.speed);}});
  soundToggle.addEventListener('change',()=>{sfx.enabled=soundToggle.checked;});
  abBtn.addEventListener('click',abPower);

  window.addEventListener('keydown',e=>{const c=e.code; if(c==='ArrowUp'||c==='KeyW')setDir(0,-1); else if(c==='ArrowDown'||c==='KeyS')setDir(0,1); else if(c==='ArrowLeft'||c==='KeyA')setDir(-1,0); else if(c==='ArrowRight'||c==='KeyD')setDir(1,0); else if(c==='Space')abPower();});
  let ts=null; cvs.addEventListener('touchstart',e=>{ts={x:e.touches[0].clientX,y:e.touches[0].clientY};},{passive:true});
  cvs.addEventListener('touchmove',e=>{if(!ts)return; const dx=e.touches[0].clientX-ts.x,dy=e.touches[0].clientY-ts.y; const ax=Math.abs(dx),ay=Math.abs(dy); if(Math.max(ax,ay)>24){ if(ax>ay)setDir(Math.sign(dx),0); else setDir(0,Math.sign(dy)); ts=null; }},{passive:true});

  function addParticles(x,y,color){for(let i=0;i<10;i++){st.particles.push({x,y,vx:(Math.random()-.5)*2,vy:(Math.random()-.6)*2,life:1,color});}}

  function tick(){st.dir=st.next; const head={x:st.snake[0].x+st.dir.x,y:st.snake[0].y+st.dir.y}; if(head.x<0||head.y<0||head.x>=COLS||head.y>=ROWS){sfx.thud(); return gameOver();} if(!st.power&&st.snake.some(s=>s.x===head.x&&s.y===head.y)){sfx.thud(); return gameOver();} st.snake.unshift(head); if(head.x===st.food.x&&head.y===st.food.y){st.score++; scoreEl.textContent=st.score; if(st.score>st.high){st.high=st.score; highEl.textContent=st.high; localStorage.setItem('ll_high2',String(st.high));} sfx.eat(); addParticles(head.x,head.y,'#ffd166'); placeFood();} else {st.snake.pop();} draw();}

  function draw(){const w=cvs.clientWidth,h=cvs.clientHeight,size=Math.floor(Math.min(w,h)/COLS); ctx.clearRect(0,0,cvs.width,cvs.height);
    ctx.save(); ctx.fillStyle='rgba(255,255,255,.06)'; ctx.fillRect(0,0,size*COLS,size*2); ctx.fillRect(0,(ROWS-2)*size,size*COLS,size*2);
    ctx.fillStyle='rgba(255,209,102,.15)'; ctx.font=`${Math.floor(size*1.2)}px Impact, system-ui, sans-serif`; ctx.textAlign='center'; ctx.textBaseline='middle';
    ctx.fillText('LLAMAS',(COLS*size)/2,size); ctx.fillText('LLAMAS',(COLS*size)/2,size*(ROWS-1)); ctx.restore();
    ctx.save(); ctx.strokeStyle='rgba(255,255,255,.35)'; ctx.lineWidth=1; for(let y=0;y<=ROWS;y+=2){ctx.beginPath();ctx.moveTo(0,y*size+.5);ctx.lineTo(COLS*size,y*size+.5);ctx.stroke();} ctx.restore();
    drawFootball(st.food.x*size,st.food.y*size,size,size);
    ctx.save(); ctx.globalAlpha=.25; st.snake.forEach(s=>{ctx.fillStyle='#000'; roundRect(ctx,s.x*size+3,s.y*size+3,size-6,size-6,6); ctx.fill();}); ctx.restore();
    st.snake.forEach((s,i)=>{const x=s.x*size,y=s.y*size; const grad=ctx.createLinearGradient(x,y,x+size,y+size);
      const c1=i===0?'#92e6a7':'#61c3a5', c2=i===0?'#2fbf71':'#2b9f63'; grad.addColorStop(0,c1); grad.addColorStop(1,c2);
      ctx.fillStyle=grad; roundRect(ctx,x+1,y+1,size-2,size-2,8); ctx.fill(); if(i===0){ctx.fillStyle='#001'; ctx.beginPath(); ctx.arc(x+size*.35,y+size*.38,size*.07,0,Math.PI*2); ctx.fill(); ctx.beginPath(); ctx.arc(x+size*.65,y+size*.38,size*.07,0,Math.PI*2); ctx.fill();
        if(st.power){ctx.save(); ctx.globalAlpha=.4; ctx.strokeStyle='#f59e0b'; ctx.lineWidth=3; roundRect(ctx,x+1,y+1,size-2,size-2,8); ctx.stroke(); ctx.restore(); drawPoop(x+size*.48,y+size*.54,size*.32);} }});
    for(let i=st.particles.length-1;i>=0;i--){const p=st.particles[i]; p.x+=p.vx; p.y+=p.vy; p.life-=.03; if(p.life<=0){st.particles.splice(i,1); continue;} ctx.globalAlpha=Math.max(.1,p.life); ctx.fillStyle=p.color; ctx.beginPath(); ctx.arc(p.x*size+size/2,p.y*size+size/2,2.2,0,Math.PI*2); ctx.fill(); ctx.globalAlpha=1;}
    requestAnimationFrame(draw);
  }
  function drawFootball(x,y,w,h){const cx=x+w/2,cy=y+h/2,rx=w*.42,ry=h*.28; ctx.save(); ctx.translate(cx,cy); const grad=ctx.createLinearGradient(-rx,-ry,rx,ry); grad.addColorStop(0,'#9c4f2b'); grad.addColorStop(1,'#6f311b'); ctx.fillStyle=grad; ctx.strokeStyle='#fff'; ctx.lineWidth=2; ctx.beginPath(); for(let i=0;i<2;i++){ctx.ellipse(0,0,rx,ry,0,0,Math.PI); ctx.scale(-1,1);} ctx.fill(); ctx.stroke(); ctx.strokeStyle='#fff'; ctx.beginPath(); ctx.moveTo(-rx*.6,0); ctx.lineTo(rx*.6,0); ctx.stroke(); for(let i=-2;i<=2;i++){ctx.beginPath(); ctx.moveTo(i*rx*.22,-ry*.28); ctx.lineTo(i*rx*.22,ry*.28); ctx.stroke();} ctx.restore();}
  function drawPoop(x,y,r){ctx.save(); ctx.fillStyle='var(--poop)'; ctx.strokeStyle='#3a2617'; ctx.lineWidth=2; ctx.beginPath(); ctx.moveTo(x,y); ctx.quadraticCurveTo(x-r*.5,y-r*.4,x-r*.2,y-r*.7); ctx.quadraticCurveTo(x,y-r*1.0,x+r*.2,y-r*.7); ctx.quadraticCurveTo(x+r*.5,y-r*.4,x,y); ctx.fill(); ctx.stroke(); for(let i=0;i<3;i++){ctx.beginPath(); ctx.fillStyle='#000'; ctx.arc(x+(Math.random()-.5)*r,y-(Math.random())*r,2,0,Math.PI*2); ctx.fill();} ctx.restore();}
  function roundRect(ctx,x,y,w,h,r){const rr=Math.min(r,w/2,h/2); ctx.beginPath(); ctx.moveTo(x+rr,y); ctx.arcTo(x+w,y,x+w,y+h,rr); ctx.arcTo(x+w,y+h,x,y+h,rr); ctx.arcTo(x,y+h,x,y,rr); ctx.arcTo(x,y,x+w,y,rr); ctx.closePath();}

  // boot
  function boot(){ reset(); setOverlay('menu','Choose Your Player','Scroll to select, then Start.'); showOverlay(); draw(); }
  boot();
  </script>
</body>
</html>